{"ast":null,"code":"import React,{createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<300+1;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_Product]=useState([]);const[cartItems,setCartItems]=useState(getDefaultCart());useEffect(()=>{fetch('http://localhost:4000/allproducts').then(response=>{if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}else{return response.json();}}).then(data=>setAll_Product(data)).catch(error=>console.error('Error fetching all products:',error));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/getcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),\"Content-Type\":'application/json'},body:\"\"}).then(response=>{if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}else{return response.json();}}).then(data=>setCartItems(data));}},[]);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/addtocart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));if(localStorage.getItem('auth-token')){fetch('http://localhost:4000/removefromcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in cartItems){if(cartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));totalAmount+=itemInfo.new_price*cartItems[item];}}return totalAmount;};const getTotalCartItems=()=>{let totalItem=0;for(const item in cartItems){if(cartItems[item]>0){totalItem+=cartItems[item];}}return totalItem;};const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_Product","cartItems","setCartItems","fetch","then","response","ok","Error","concat","status","json","data","catch","error","console","localStorage","getItem","method","headers","Accept","body","addToCart","itemId","prev","JSON","stringify","log","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItem","contextValue","Provider","value","children"],"sources":["C:/Users/Beth/OneDrive/Desktop/Kendy/Finders Keepers/frontend/src/Context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\n\r\n\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst getDefaultCart = ()=>{\r\n        let cart = {};\r\n        for (let index = 0; index < 300+1; index++){\r\n            cart[index] = 0;\r\n        }\r\n        return cart;\r\n    }\r\n\r\nconst ShopContextProvider = (props) => {\r\n\r\n    const[all_product,setAll_Product] = useState([]);\r\n    const [cartItems,setCartItems] = useState(getDefaultCart());\r\n\r\n    useEffect(()=>{\r\n        fetch('http://localhost:4000/allproducts')\r\n        .then((response) => {\r\n            if (!response.ok) {\r\n              throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            else{\r\n                return response.json();\r\n            }\r\n            \r\n          })\r\n          .then((data) => setAll_Product(data))\r\n          .catch((error) => console.error('Error fetching all products:', error));\r\n\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('http://localhost:4000/getcart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    \"Content-Type\":'application/json',\r\n                },\r\n                body:\"\",\r\n            })\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                  throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                else{\r\n                    return response.json();\r\n                }\r\n                \r\n              })\r\n            .then((data)=>setCartItems(data));\r\n        }\r\n    },[])\r\n\r\n    const addToCart =(itemId) =>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]+1}));\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('http://localhost:4000/addtocart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    'Content-Type':'application/json',\r\n                },\r\n                body:JSON.stringify({\"itemId\":itemId}),\r\n            })\r\n            .then((response)=>response.json())\r\n            .then((data)=>console.log(data));\r\n        }\r\n    }\r\n\r\n\r\n    const removeFromCart =(itemId) =>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]-1}));\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('http://localhost:4000/removefromcart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    'Content-Type':'application/json',\r\n                },\r\n                body:JSON.stringify({\"itemId\":itemId}),\r\n            })\r\n            .then((response)=>response.json())\r\n            .then((data)=>console.log(data));  \r\n        }\r\n    }\r\n\r\n    const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for(const item in cartItems)\r\n        {\r\n            if(cartItems[item]>0)\r\n            {\r\n                let itemInfo = all_product.find((product)=>product.id===Number(item))\r\n                totalAmount += itemInfo.new_price*cartItems[item];\r\n            }\r\n        }\r\n        return totalAmount;\r\n    }\r\n\r\n    const getTotalCartItems =() =>{\r\n        let totalItem = 0;\r\n        for(const item in cartItems)\r\n            {\r\n                if(cartItems[item]>0)\r\n                {\r\n                    totalItem += cartItems[item];\r\n                }\r\n            }\r\n        return totalItem;\r\n    }\r\n\r\n    const contextValue ={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};\r\n\r\n    return(\r\n        <ShopContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </ShopContext.Provider>\r\n    )\r\n}\r\n\r\nexport default ShopContextProvider;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}